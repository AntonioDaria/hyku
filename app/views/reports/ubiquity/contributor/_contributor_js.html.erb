

<script type="text/javascript">

    // add linked fields

    $(document).on("turbolinks:load", function(){

        return $("body").on("click", ".add_contributor", function(event){

            console.log('add contributor');

            event.preventDefault();
            var ubiquityContributorClass = $(this).attr('data-addUbiquityContributor');
            var time = new Date().getTime();
            cloneUbiDiv = $(this).parent('div' + `${ubiquityContributorClass}`).clone();
            console.log('clone count', cloneUbiDiv.length );
            $(`${ubiquityContributorClass}` +  ':last').after(cloneUbiDiv)

        });
    });


    //remove linked fields
    $(document).on("turbolinks:load", function(){
        //$(document).ready(function() {
        return $("body").on("click", ".remove_contributor", function(event){
            console.log('remove contribuor');
            event.preventDefault();
            var ubiquityContributorClass = $(this).attr('data-removeUbiquityContributor');

            _this = this;
            //$(this).parent('div' + `${ubiquityContributorClass}`).remove();
            removeubiquityContributor(_this, ubiquityContributorClass);

        });
    });


    function removeubiquityContributor(self, contributorDiv) {
        if ($(".ubiquity-meta-contributor").length > 1 ) {
            //$(this).parent('div' + `${ubiquityContributorClass}`).remove();
            $(self).parent('div' + `${contributorDiv}`).remove();
        }
    }


</script>

